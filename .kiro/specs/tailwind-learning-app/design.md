# TailwindCSS学習アプリ 設計書

## 概要

TailwindCSS学習アプリは、React + JSX + Tailwind CSSで構築されるインタラクティブな学習プラットフォームです。5つの学習レベル（入門編、中級編、応用編、文字組編、実践編）を提供し、各レベルで20問の学習課題を通じてTailwind CSSを段階的に習得できます。

## アーキテクチャ

### 技術スタック
- **フロントエンド**: React 18 + JSX
- **スタイリング**: Tailwind CSS 3.4
- **ビルドツール**: Vite 5.2
- **開発言語**: JavaScript (ES6+)

### アーキテクチャパターン
- **コンポーネントベース**: 単一のメインコンポーネント（TailwindLearningApp）
- **状態管理**: React Hooks (useState, useEffect)
- **レンダリング**: クライアントサイドレンダリング (CSR)

## コンポーネントとインターフェース

### メインコンポーネント: TailwindLearningApp

#### 状態管理
```javascript
const [level, setLevel] = useState("beginner");           // 現在の学習レベル
const [currentLesson, setCurrentLesson] = useState(0);    // 現在のレッスン番号
const [userInput, setUserInput] = useState("");          // ユーザー入力
const [showHint, setShowHint] = useState(false);         // ヒント表示状態
const [previewKey, setPreviewKey] = useState(0);         // プレビュー強制更新用
```

#### 主要関数
- `switchLevel(newLevel)`: 学習レベル切り替え
- `checkAnswer()`: 正解判定
- `lesson.preview(classes)`: プレビュー生成

### レッスンデータ構造
```javascript
{
  title: string,        // レッスンタイトル
  description: string,  // 課題説明
  hint: string,        // ヒント（正解クラス名）
  solution: string,    // 正解
  preview: function    // プレビュー生成関数
}
```

## データモデル

### 学習レベル
- `beginner`: 入門編（基本的な色、スペース、サイズ）
- `intermediate`: 中級編（Flexbox、Grid、インタラクション）
- `advanced`: 応用編（レスポンシブ、ダークモード、アニメーション）
- `typography`: 文字組編（行間、字間、フォント設定）
- `practical`: 実践編（実際のUI部品作成）

### 学習コンテンツ
各レベルに20問の学習課題を配置：
- 基本概念から応用まで段階的な構成
- 実践的なTailwind CSSクラスの使用例
- リアルタイムプレビューによる即座のフィードバック

## 正解性プロパティ

*プロパティは、システムのすべての有効な実行において真であるべき特性や動作の形式的な記述です。プロパティは、人間が読める仕様と機械で検証可能な正解性保証の橋渡しとなります。*

### プロパティ1: レベル切り替え時の状態リセット
*任意の*学習レベルから別の学習レベルに切り替えたとき、現在のレッスン番号は0にリセットされ、ユーザー入力とヒント表示がクリアされる
**検証対象: 要件 1.3**

### プロパティ2: 正解判定の一貫性
*任意の*レッスンにおいて、ユーザー入力が正解と完全に一致する場合のみ正解メッセージが表示される
**検証対象: 要件 2.2**

### プロパティ3: プレビュー更新の即時性
*任意の*ユーザー入力変更に対して、プレビューコンポーネントが強制的に再レンダリングされる
**検証対象: 要件 2.5**

### プロパティ4: ナビゲーションの境界制御
*任意の*レッスン位置において、最初のレッスンでは前へボタンが無効化され、最後のレッスンでは次へボタンが無効化される
**検証対象: 要件 3.3, 3.4**

### プロパティ5: レッスンデータの完全性
*任意の*レッスンオブジェクトは、title、description、hint、solution、preview関数のすべてのプロパティを含む
**検証対象: 要件 7.1**

### プロパティ6: レベル別コンテンツ数の一貫性
*任意の*学習レベルは正確に20問の学習課題を含む
**検証対象: 要件 7.5**

### プロパティ7: 学習ガイド表示の完全性
*任意の*アプリ表示時において、学習ガイドセクションが基本ルール、よく使う値、学習のコツを含んで表示される
**検証対象: 要件 4.2, 4.3, 4.4**

### プロパティ8: プレースホルダー表示の視認性
*任意の*入力フィールドにおいて、プレースホルダーテキストは薄い青色（text-blue-400）で表示され、十分な視認性を確保する
**検証対象: 要件 8.1, 8.2**

## エラーハンドリング

### 入力検証
- ユーザー入力の空白文字処理（trim()）
- 不正なレッスン番号の境界チェック
- 存在しない学習レベルの防止

### 状態管理エラー
- 無効な状態遷移の防止
- プレビュー生成エラーの処理
- レンダリングエラーの回復

### パフォーマンス最適化
- useEffectによる不要な再レンダリング防止
- プレビューキーによる強制更新制御
- Tailwind CSS safelistによる動的クラス事前生成

## テスト戦略

### 単体テスト
- レッスンデータ構造の検証
- 正解判定ロジックのテスト
- 状態遷移の確認
- 境界条件のテスト（最初/最後のレッスン）

### プロパティベーステスト
プロパティベーステストには**fast-check**ライブラリを使用し、各テストは最低100回の反復実行を行います。

各プロパティベーステストには、設計書の正解性プロパティを参照するコメントを以下の形式で付与します：
`**Feature: tailwind-learning-app, Property {number}: {property_text}**`

#### テスト対象プロパティ
1. レベル切り替え時の状態リセット動作
2. 正解判定の一貫性
3. プレビュー更新の即時性
4. ナビゲーション境界制御
5. レッスンデータの完全性
6. レベル別コンテンツ数の一貫性
7. 学習ガイド表示の完全性

### 統合テスト
- ユーザーフロー全体のテスト
- レベル間の遷移テスト
- プレビュー機能の統合テスト

### パフォーマンステスト
- プレビュー更新の応答時間測定
- メモリ使用量の監視
- レンダリング性能の評価